System.register(["./index-legacy-CkvIY1Fm.js"],function(t,e){"use strict";var a,s,c,l;return{setters:[e=>{a=e.W,s=e.C,c=e.z,l=e.A}],execute:function(){class e extends a{async getPhoto(n){return new Promise(async(t,a)=>{if(n.webUseInput||n.source===s.Photos)this.fileInputExperience(n,t,a);else if(n.source===s.Prompt){let e=document.querySelector("pwa-action-sheet");e||(e=document.createElement("pwa-action-sheet"),document.body.appendChild(e)),e.header=n.promptLabelHeader||"Photo",e.cancelable=!1,e.options=[{title:n.promptLabelPhoto||"From Photos"},{title:n.promptLabelPicture||"Take Picture"}],e.addEventListener("onSelection",async e=>{0===e.detail?this.fileInputExperience(n,t,a):this.cameraExperience(n,t,a)})}else this.cameraExperience(n,t,a)})}async pickImages(e){return new Promise(async(e,t)=>{this.multipleFileInputExperience(e,t)})}async cameraExperience(t,a,n){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=t.direction===c.Front?"user":"environment",document.body.appendChild(r);try{await r.componentOnReady(),r.addEventListener("onPhoto",async e=>{e=e.detail;null===e?n(new l("User cancelled photos app")):e instanceof Error?n(e):a(await this._getCameraPhoto(e,t)),r.dismiss(),document.body.removeChild(r)}),r.present()}catch(e){this.fileInputExperience(t,a,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,a,n)}fileInputExperience(n,r,t){let i=document.querySelector("#_capacitor-camera-input");const o=()=>{var e;null!=(e=i.parentNode)&&e.removeChild(i)};i||((i=document.createElement("input")).id="_capacitor-camera-input",i.type="file",i.hidden=!0,document.body.appendChild(i),i.addEventListener("change",e=>{var t=i.files[0];let a="jpeg";if("image/png"===t.type?a="png":"image/gif"===t.type&&(a="gif"),"dataUrl"===n.resultType||"base64"===n.resultType){const e=new FileReader;e.addEventListener("load",()=>{if("dataUrl"===n.resultType)r({dataUrl:e.result,format:a});else if("base64"===n.resultType){const n=e.result.split(",")[1];r({base64String:n,format:a})}o()}),e.readAsDataURL(t)}else r({webPath:URL.createObjectURL(t),format:a}),o()}),i.addEventListener("cancel",e=>{t(new l("User cancelled photos app")),o()})),i.accept="image/*",i.capture=!0,n.source===s.Photos||n.source===s.Prompt?i.removeAttribute("capture"):n.direction===c.Front?i.capture="user":n.direction===c.Rear&&(i.capture="environment"),i.click()}multipleFileInputExperience(e,t){let r=document.querySelector("#_capacitor-camera-input-multiple");const i=()=>{var e;null!=(e=r.parentNode)&&e.removeChild(r)};r||((r=document.createElement("input")).id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",a=>{var n=[];for(let t=0;t<r.files.length;t++){const a=r.files[t];let e="jpeg";"image/png"===a.type?e="png":"image/gif"===a.type&&(e="gif"),n.push({webPath:URL.createObjectURL(a),format:e})}e({photos:n}),i()}),r.addEventListener("cancel",e=>{t(new l("User cancelled photos app")),i()})),r.accept="image/*",r.click()}_getCameraPhoto(e,i){return new Promise((t,a)=>{const n=new FileReader,r=e.type.split("/")[1];"uri"===i.resultType?t({webPath:URL.createObjectURL(e),format:r,saved:!1}):(n.readAsDataURL(e),n.onloadend=()=>{var e=n.result;"dataUrl"===i.resultType?t({dataUrl:e,format:r,saved:!1}):t({base64String:e.split(",")[1],format:r,saved:!1})},n.onerror=e=>{a(e)})})}async checkPermissions(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}t("CameraWeb",e),t("Camera",new e)}}});